import os
from pathlib import Path

def get_solution_files():
    """Find all Python and Java solution files"""
    # Your structure has Leetcode/Leetcode/... so we need to adjust
    base_dir = Path("Leetcode")
    
    python_files = []
    java_files = []
    cpp_files = []
    
    # Find all .py and .java files recursively
    for py_file in base_dir.rglob("*.py"):
        python_files.append(py_file)
    
    for java_file in base_dir.rglob("*.java"):
        java_files.append(java_file)
    
    for cpp_file in base_dir.rglob("*.c++"):
        cpp_files.append(cpp_file)

    return python_files, java_files, cpp_files

def generate_readme(python_files, java_files, cpp_files):
    """Generate README content"""
    readme_content = f"""# LeetCode Solutions

![Tests](https://github.com/zigfox123/Leetcode/actions/workflows/test-solutions.yaml/badge.svg)

My solutions to LeetCode problems in Python, Java, and C++.

## üìä Statistics

- **Total Solutions:** {len(python_files) + len(java_files) + len(cpp_files)}
- **Python Solutions:** {len(python_files)}
- **Java Solutions:** {len(java_files)}
- **C++ Solutions:** {len(cpp_files)}

## üêç Python Solutions

"""
    
    if python_files:
        for file in sorted(python_files):
            problem_name = file.stem.replace("_", " ").replace("-", " ").title()
            readme_content += f"- [{problem_name}]({file})\n"
    else:
        readme_content += "No Python solutions yet.\n"
    
    readme_content += "\n## ‚òï Java Solutions\n\n"
    
    if java_files:
        for file in sorted(java_files):
            problem_name = file.stem.replace("_", " ").replace("-", " ").title()
            readme_content += f"- [{problem_name}]({file})\n"
    else:
        readme_content += "No Java solutions yet.\n"

    readme_content += "\n## üá® C++ Solutions\n\n"    
    
    if cpp_files:
        for file in sorted(cpp_files):
            problem_name = file.stem.replace("_", " ").replace("-", " ").title()
            readme_content += f"- [{problem_name}]({file})\n"
    else:
        readme_content += "No üá® C++ solutions yet.\n"

    readme_content += """
---

*This README is automatically generated by GitHub Actions*
"""
    
    return readme_content

def main():
    python_files, java_files, cpp_files = get_solution_files()
    readme_content = generate_readme(python_files, java_files, cpp_files)
    
    with open("README.md", "w") as f:
        f.write(readme_content)
    
    print(f"‚úì Generated README with {len(python_files)} Python, {len(java_files)} Java, and {len(cpp_files)} C++ solutions")

if __name__ == "__main__":
    main()